<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventas Autónomas con IA - Desbloquea la Autonomía de tus Funnels</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0A091B; /* Azul oscuro principal */
            color: #E0E0E0; /* Texto principal claro */
            overflow-x: hidden;
        }
        .gradient-bg {
            background: radial-gradient(circle at top, rgba(12, 15, 33, 0.9), #0A091B 70%);
        }
        .hero-glow {
            box-shadow: 0 0 80px rgba(76, 29, 149, 0.6), 0 0 120px rgba(0, 255, 255, 0.3);
        }
        .cta-button {
            background: linear-gradient(90deg, #6A11CB 0%, #2575FC 100%);
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(37, 117, 252, 0.5);
        }
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(106, 17, 203, 0.7);
        }
        /* Animaciones de scroll */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* Animación SVG Hero */
        #brain-path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw 5s linear infinite;
        }
        .node {
            animation: pulse 2s infinite alternate;
        }
        .node-1 { animation-delay: 0s; }
        .node-2 { animation-delay: 0.5s; }
        .node-3 { animation-delay: 1s; }
        .node-4 { animation-delay: 1.5s; }

        @keyframes draw {
            to {
                stroke-dashoffset: 0;
            }
        }
        @keyframes pulse {
            from {
                r: 4;
                opacity: 0.7;
            }
            to {
                r: 8;
                opacity: 1;
            }
        }
    </style>
    
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1335705618286621');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1335705618286621&ev=PageView&noscript=1"
    /></noscript>
    
    <script>
        const TRACKING_WEBHOOK_URL = "https://n8n.iaparatodos.io/webhook/23a67bca-3a32-4593-8f57-8c5c287a1caf"; // Tu URL de tracking

        /**
         * ¡NUEVO!
         * Obtiene un ID de visitante único de localStorage o crea uno nuevo.
         */
        function getOrCreateVisitorId() {
            let visitorId = localStorage.getItem('visitor_id');
            if (!visitorId) {
                // Genera un ID único y lo guarda
                visitorId = crypto.randomUUID();
                localStorage.setItem('visitor_id', visitorId);
            }
            return visitorId;
        }

        /**
         * Helper para parsear parámetros UTM de la URL. (Sin cambios)
         */
        function getUTMParams() {
            const params = new URLSearchParams(window.location.search);
            const utms = {};
            const utmKeys = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
            
            utmKeys.forEach(key => {
                if (params.has(key)) {
                    utms[key] = params.get(key);
                }
            });
            return utms;
        }

        /**
         * ¡ACTUALIZADO!
         * Envía un evento de tracking al webhook Y al Meta Pixel.
         * Ahora incluye el visitor_id.
         */
        function trackEvent(eventType, eventDetails = {}) {
            // Obtenemos el email si ya fue guardado.
            const userEmail = localStorage.getItem('userEmail') || 'visitante@anonimo.com';
            
            // --- ¡NUEVO! Obtenemos el ID de visitante ---
            const visitorId = getOrCreateVisitorId();
            
            // --- ¡NUEVO! Obtenemos los parámetros UTM ---
            const utmParams = getUTMParams(); 

            // Construimos el payload
            const payload = {
                // --- ¡NUEVO! ---
                visitor_id: visitorId, 
                
                email: userEmail,
                event: eventType,
                details: {
                    ...eventDetails,
                    ...utmParams,
                    url: window.location.href,
                    timestamp: new Date().toISOString()
                }
            };

            // 1. Enviamos el evento a nuestro webhook de n8n.
            navigator.sendBeacon(TRACKING_WEBHOOK_URL, JSON.stringify(payload));

            // 2. Enviamos el evento al Meta Pixel si existe
            if (typeof fbq === 'function') {
                if (eventType === 'page_view') {
                    // El pixel base ya dispara 'PageView', disparamos 'ViewContent' para más detalle.
                    fbq('track', 'ViewContent');
                }
                if (eventType === 'form_submit') {
                    // ¡Este es el evento de conversión clave para Meta!
                    fbq('track', 'Lead');
                }
            }
        }
    </script>
    </head>
<body class="gradient-bg">

    <div id="particles-js"></div>
    <div class="relative z-10">
        <header class="absolute top-0 left-0 w-full p-4">
            <div class="container mx-auto flex justify-between items-center">
                <h1 class="text-xl font-bold text-white">IAParaTodos</h1>
            </div>
        </header>

        <main>
            <section class="min-h-screen flex items-center justify-center pt-20 pb-10 text-center overflow-hidden">
                <div class="container mx-auto px-4 reveal">
                    <div class="max-w-4xl mx-auto">
                        <div class="w-48 h-48 mx-auto mb-8 hero-glow rounded-full flex items-center justify-center bg-black bg-opacity-20">
                            <svg viewBox="0 0 100 100" class="w-32 h-32">
                                <path id="brain-path" d="M20 50 Q 35 20, 50 50 T 80 50" stroke="cyan" stroke-width="2" fill="none" />
                                <path d="M20 50 Q 35 80, 50 50 T 80 50" stroke="#6A11CB" stroke-width="1" fill="none" opacity="0.6"/>
                                <circle cx="20" cy="50" r="5" fill="cyan" class="node node-1" />
                                <circle cx="50" cy="50" r="5" fill="cyan" class="node node-2" />
                                <circle cx="80" cy="50" r="5" fill="cyan" class="node node-3" />
                                <circle cx="35" cy="35" r="4" fill="#2575FC" class="node node-4" />
                                <circle cx="65" cy="65" r="4" fill="#2575FC" class="node node-2" />
                            </svg>
                        </div>
                        <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
                            Los Funnels que aprenden: el futuro de las ventas ya empezó.
                        </h1>
                        <p class="text-lg md:text-xl text-cyan-300 font-bold mb-8">
                            Descubre la era de las Ventas Autónomas con IA.
                        </p>
                        <p class="max-w-2xl mx-auto text-base md:text-lg text-gray-300 mb-10">
                            Descubre cómo los sistemas inteligentes adaptan correos, ofertas y mensajes automáticamente. Descarga la guía gratuita y aprende a construir un sistema que analiza tus datos, personaliza cada mensaje y convierte en automático.
                        </p>
                        
                        <form id="leadCaptureForm" name="captura-leads" method="POST" action="/gracias.html" data-netlify="true" data-netlify-honeypot="bot-field" class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto">
                            <input type="hidden" name="form-name" value="captura-leads" />
                            <p class="hidden">
                                <label>No llenar: <input name="bot-field" /></label>
                            </p>
                            <input type="email" name="email" placeholder="Tu email principal" required class="w-full px-5 py-4 bg-gray-900 bg-opacity-50 border-purple-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition">
                            <button type="submit" class="cta-button text-white font-bold px-8 py-4 rounded-lg whitespace-nowrap">
                                ¡Descarga la Guía Gratuita Ahora!
                            </button>
                        </form>
                         <p class="mt-4 text-xs text-gray-500">Basado en metodologías implementadas por las empresas mas innovadoras del mercado.</p>
                    </div>
                </div>
            </section>

            <section class="py-16 sm:py-24">
                <div class="container mx-auto px-4 text-center">
                    <div class="max-w-3xl mx-auto reveal">
                        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-white">La competencia avanza. Es hora de un cambio.</h2>
                        <p class="text-lg text-gray-300">
                            Tus funnels siguen siendo manuales y cada día pierdes oportunidades valiosas. Otros ya utilizan la inteligencia artificial para optimizar sus ventas, llego el momento para que te subas a la nueva ola.
                        </p>
                    </div>
                </div>
            </section>
            
            <section class="py-16 sm:py-24 bg-black bg-opacity-20">
                <div class="container mx-auto px-4">
                    <div class="grid md:grid-cols-2 gap-12 items-center">
                        <div class="reveal">
                            <span class="text-cyan-400 font-semibold">LA SOLUCIÓN</span>
                            <h2 class="text-3xl md:text-4xl font-bold my-4 text-white">La Guía Definitiva: De Funnels Inteligentes a Sistemas Autónomos</h2>
                            <p class="text-gray-300 mb-6">Aprende a integrar IA, automatización y datos para vender 24/7 sin intervención manual. Esta guía no solo te enseña tecnología, te enseña como liberar tu tiempo y hacer que tu negocio piense por si mismo.</p>
                            <ul class="space-y-4">
                                <li class="flex items-start">
                                    <svg class="w-6 h-6 text-green-400 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    <span><strong>Entiende la nueva generación de funnels:</strong> Descubre por qué los modelos tradicionales ya no son suficientes.</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-6 h-6 text-green-400 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    <span><strong>Dominar el flujo de datos inteligente:</strong> Conecta herramientas como n8n y Supabase para crear un cerebro central para tus ventas.</span>
                                </li>
                                <li class="flex items-start">
                                     <svg class="w-6 h-6 text-green-400 mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    <span><strong>Personalización con IA adaptativa:</strong> Descubre cómo la IA puede cualificar leads, personalizar comunicaciones y optimizar conversiones en tiempo real.</span>
                                </li>
                            </ul>
                        </div>
                        <div class="reveal flex justify-center items-center p-8">
                            <img src="https://placehold.co/500x600/1A1A2E/CYAN?text=Gu%C3%ADa+PDF&font=inter" alt="Portada de la Guía PDF 'Desbloquea la Autonomía de tus Ventas con IA'" class="rounded-lg shadow-2xl" style="box-shadow: 0 0 40px rgba(0, 255, 255, 0.2);">
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="py-16 sm:py-24">
                <div class="container mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 text-white reveal">Un sistema simple, un poder que aprende, predice y vende.</h2>
                    <div class="grid sm:grid-cols-3 gap-8 max-w-4xl mx-auto">
                        <div class="p-6 bg-gray-900 bg-opacity-40 rounded-xl border border-purple-800 reveal" style="transition-delay: 100ms;">
                             <svg class="w-12 h-12 mx-auto mb-4 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path></svg>
                            <h3 class="text-xl font-bold mb-2 text-white">1. Captura</h3>
                            <p class="text-gray-400">Atrae y captura leads desde cualquier fuente con un sistema unificado.</p>
                        </div>
                        <div class="p-6 bg-gray-900 bg-opacity-40 rounded-xl border border-purple-800 reveal" style="transition-delay: 200ms;">
                             <svg class="w-12 h-12 mx-auto mb-4 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.373 3.373 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                            <h3 class="text-xl font-bold mb-2 text-white">2. Inteligencia</h3>
                            <p class="text-gray-400">La IA analiza, califica y predice el comportamiento de cada lead en tiempo real.</p>
                        </div>
                         <div class="p-6 bg-gray-900 bg-opacity-40 rounded-xl border border-purple-800 reveal" style="transition-delay: 300ms;">
                             <svg class="w-12 h-12 mx-auto mb-4 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            <h3 class="text-xl font-bold mb-2 text-white">3. Autonomía</h3>
                            <p class="text-gray-400">El sistema actúa, nutre y convierte mientras tu te enfocas en escalar.</p>
                        </div>
                    </div>
                </div>
            </section>

             <section class="py-16 sm:py-24">
                <div class="container mx-auto px-4 text-center">
                    <div class="max-w-3xl mx-auto reveal">
                        <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">Empieza hoy la evolucion de tus funnels.</h2>
                        <p class="text-lg text-gray-300 mb-8">Descarga tu guía gratuita y descubre cómo construir un sistema que aprende, se adapta y vende por ti.</p>
                        <a href="#leadCaptureForm" class="cta-button inline-block text-white font-bold px-10 py-5 rounded-lg text-lg">
                            Quiero mi Guía Gratuita
                        </a>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="py-8 border-t border-purple-900">
            <div class="container mx-auto px-4 text-center text-gray-500">
                <p>&copy; 2025 IA Para Todos. Todos los derechos reservados.</p>
                <div class="mt-2 space-x-4">
                    <a href="#" class="hover:text-cyan-400 transition">Privacidad</a>
                    <span>&middot;</span>
                    <a href="#" class="hover:text-cyan-400 transition">Términos</a>
                </div>
            </div>
        </footer>
    </div>
    
    <script>
        // Script de Animación de Partículas (Sin cambios)
        const canvas = document.createElement('canvas');
        const particlesContainer = document.getElementById('particles-js');
        particlesContainer.appendChild(canvas);
        const ctx = canvas.getContext('2d');
        let particlesArray;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x; this.y = y; this.directionX = directionX;
                this.directionY = directionY; this.size = size; this.color = color;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
            update() {
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                this.x += this.directionX;
                this.y += this.directionY;
                this.draw();
            }
        }

        function init() {
            particlesArray = [];
            let numberOfParticles = (canvas.height * canvas.width) / 9000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 0.5;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * .4) - .2;
                let directionY = (Math.random() * .4) - .2;
                let color = 'rgba(76, 29, 149, 0.6)';
                particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
            }
        }
        
        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, innerWidth, innerHeight);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
        }

        window.addEventListener('resize', () => {
            canvas.width = innerWidth;
            canvas.height = innerHeight;
            init();
        });

        init();
        animate();
    </script>
    
    <script>
        // Script principal de lógica de página (Sin cambios)
        document.addEventListener('DOMContentLoaded', function() {
            
            // 1. Tracking de Page View
            trackEvent('page_view', { page_name: 'landing_funnel_autonomo' });

            // 2. Tracking de Tiempo en Página
            const startTime = Date.now();
            window.addEventListener('beforeunload', () => {
                const durationInSeconds = Math.round((Date.now() - startTime) / 1000);
                trackEvent('time_on_page', { page_name: 'landing_funnel_autonomo', duration: durationInSeconds });
            });
            
            // 3. Tracking de Envío de Formulario
            const leadForm = document.getElementById('leadCaptureForm');
            if(leadForm) {
                leadForm.addEventListener('submit', function(event) {
                    const emailInput = leadForm.querySelector('input[name="email"]').value;
                    
                    if (emailInput) {
                        localStorage.setItem('userEmail', emailInput);
                        // Dispara nuestro evento y el de Meta Pixel
                        trackEvent('form_submit', { form_name: 'guia_pdf' });
                    }
                });
            }

            // 4. Animaciones al hacer scroll (reveal)
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            const revealElements = document.querySelectorAll('.reveal');
            revealElements.forEach(el => observer.observe(el));

            // 5. Tracking de Profundidad de Scroll
            const trackedScrollPercentages = new Set();
            window.addEventListener('scroll', () => {
                const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
                // Evitar división por cero si el contenido no es scrolleable
                if (scrollableHeight <= 0) return; 

                const scrollPercentage = (window.scrollY / scrollableHeight) * 100;
                
                const milestones = [25, 50, 75, 90];
                milestones.forEach(milestone => {
                    if (scrollPercentage >= milestone && !trackedScrollPercentages.has(milestone)) {
                        trackEvent('scroll_depth', { percentage: milestone });
                        trackedScrollPercentages.add(milestone);
                    }
                });
            }, { passive: true }); // Usar passive listener para mejor rendimiento
        });
    </script>

</body>
</html>